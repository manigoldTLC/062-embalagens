@import '../../styles/variables';

.header {
	background-color: $primary-color;
	position: sticky;
	top: 0;
	z-index: $zindex-sticky;
	width: 100%;
	transition: box-shadow 0.3s ease-in-out;
}

.header.scrolled {
	box-shadow: 0 2px 10px rgba($brand-black, 0.15);
}

.container {
	max-width: $container-max-width-xl;
	margin: 0 auto;
	padding-left: $spacer-md;
	padding-right: $spacer-md;
	width: 100%;
}

.topBar {
	background-color: $primary-color-dark;
	color: rgba($brand-white, 0.9);
	padding: calc($spacer-xs - 1px) $spacer-md;
	font-size: $font-size-sm * 0.88;
	line-height: 1.4;
	border-bottom: 1px solid rgba($brand-black, 0.15);

	@include media-breakpoint-down(md) {
		background-color: $primary-color;
		border: none;
	}
}

.topBarContainer {
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: $spacer-md;
	min-height: 32px;
}

.topBarLeft,
.topBarCenter,
.topBarRight {
	display: flex;
	align-items: center;
	gap: $spacer-xs;

	@include media-breakpoint-down(md) {
		display: none;
	}
}

.topBarLeft {
	flex-shrink: 0;
}

.topBarCenter {
	flex-grow: 1;
	justify-content: center;
	text-align: center;

	p {
		margin: 0;
		font-size: $font-size-sm * 0.9;
		color: rgba($brand-white, 0.85);
	}

	@include media-breakpoint-down(md) {
		display: none;
	}
}

.topBarRight {
	flex-shrink: 0;
	justify-content: flex-end;
}

.topBarLink {
	color: rgba($brand-white, 0.85);
	text-decoration: none;
	display: flex;
	align-items: center;
	gap: $spacer-xs / 2;
	padding: $spacer-xs / 1.5 $spacer-xs;
	border-radius: $border-radius-sm;
	transition: color 0.2s ease, background-color 0.2s ease;

	svg {
		font-size: 0.95em;
		margin-bottom: -1px;
	}

	&:hover,
	&:focus {
		color: $brand-white;
		background-color: rgba($brand-white, 0.1);
	}
}

.mainNavWrapper {
	background-color: $primary-color;
	padding: $spacer-md $spacer-md;
}

.mainNavContainer {
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: $spacer-md;
	min-height: 50px;
}

.logoLink {
	max-width: 120px;
	height: 45px;

	@include media-breakpoint-down(md) {
		width: 65px;
	}

	img {
		width: 100%;
		height: 100%;
		object-fit: contain;
	}
}

.navigation {
	flex-grow: 1;
	display: flex;
	justify-content: center;
	padding-left: $spacer-lg * 11.5;
	margin-right: $spacer-md;

	@include media-breakpoint-down(xl) {
		padding-left: $spacer-md;
		justify-content: flex-start;
	}

	ul {
		list-style: none;
		margin: 0;
		padding: 0;
		display: flex;
		align-items: center;
		gap: $spacer-xs;
	}
}

.navLink {
	color: rgba($brand-white, 0.9);
	font-weight: $font-weight-medium;
	text-decoration: none;
	padding: $spacer-sm $spacer-md;
	border-radius: $border-radius-sm;
	transition: background-color 0.2s ease, color 0.2s ease;
	position: relative;
	font-size: $font-size-base;
	white-space: nowrap;

	&:hover,
	&:focus {
		background-color: rgba($brand-white, 0.15);
		color: $brand-white;
		text-decoration: none;
	}

	&.activeLink {
		color: $brand-white;
		font-weight: $font-weight-semibold;

		&::after {
			content: '';
			position: absolute;
			bottom: 6px;
			left: $spacer-md;
			right: $spacer-md;
			height: 3px;
			background-color: $brand-yellow;
			border-radius: 2px;
		}
	}
}

.rightControls {
	display: flex;
	align-items: center;
	gap: $spacer-md;
	margin-left: auto;

	@include media-breakpoint-down(lg) {
		gap: $spacer-sm;
	}
}

.searchContainer {
	position: relative;
	display: flex;
	align-items: center;
	min-width: 220px;

	@include media-breakpoint-down(md) {
		min-width: auto;
	}
}

.searchForm {
	display: flex;
	align-items: center;
	background-color: rgba($brand-white, 0.9);
	border: 1px solid transparent;
	border-radius: $border-radius-pill;
	padding-left: $spacer-sm;
	width: 100%;
	transition: border-color 0.2s ease, box-shadow 0.2s ease;

	&:focus-within {
		border-color: $brand-yellow;
		background-color: $brand-white;
		box-shadow: 0 0 0 3px rgba($brand-yellow, 0.3);
	}
}

.searchInput {
	background: transparent;
	border: none;
	outline: none;
	color: $neutral-darkest;
	font-size: $font-size-sm;
	padding: calc($spacer-xs + 3px) 0 calc($spacer-xs + 3px) $spacer-xs;
	flex-grow: 1;
	min-width: 120px;

	&::placeholder {
		color: $neutral-medium;
		opacity: 0.8;
	}

	&::-webkit-search-decoration,
	&::-webkit-search-cancel-button,
	&::-webkit-search-results-button,
	&::-webkit-search-results-decoration {
		-webkit-appearance: none;
	}
}

.searchButton {
	background: transparent;
	border: none;
	color: $neutral-dark;
	cursor: pointer;
	padding: $spacer-sm;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 1.1rem;
	transition: color 0.2s ease;
	border-radius: 0 $border-radius-pill $border-radius-pill 0;

	&:hover {
		color: $primary-color-dark;
	}
}

.headerActions {
	display: flex;
	align-items: center;
	gap: $spacer-md;
	flex-shrink: 0;
}

.actionButton {
	color: $brand-white;
	text-decoration: none;
	display: flex;
	align-items: center;
	gap: $spacer-xs;
	border-radius: $border-radius-sm;
	transition: background-color 0.2s ease, color 0.2s ease, transform 0.1s ease;

	svg {
		font-size: 1.5rem;
	}

	&:hover,
	&:focus {
		color: $brand-white;
		background-color: rgba($brand-white, 0.15);
		text-decoration: none;
	}

	&:active {
		transform: scale(0.95);
	}
}

.cartIconWrapper {
	position: relative;
	display: flex;
	align-items: center;
}

.itemCountBadge {
	background-color: $brand-yellow;
	color: $text-color-on-accent;
	border-radius: 50%;
	font-size: $font-size-sm * 0.8;
	font-weight: $font-weight-bold;
	line-height: 1;
	position: absolute;
	top: -7px;
	right: -9px;
	min-width: 18px;
	height: 18px;
	padding: 2px;
	display: flex;
	justify-content: center;
	align-items: center;
	box-shadow: 0 0 0 1.5px $primary-color;
}

.mobileMenuButton {
	display: none;
	background: none;
	border: none;
	color: $brand-white;
	font-size: 1.8rem;
	cursor: pointer;
	z-index: 1100;

	@include media-breakpoint-down(lg) {
		display: block;
		position: absolute;
		top: 15px;
		right: $spacer-md;
	}
}

.actionButtonText {
	font-size: $font-size-base;
	margin-left: $spacer-lg / 2;

	@include media-breakpoint-down(lg) {
		display: none;
	}
}

.mobileOnlyLink {
	display: none;
}

@include media-breakpoint-down(lg) {
	.topBarCenter {
		display: none;
	}

	.topBarLeft span,
	.topBarRight span {
		display: none;
	}

	.topBarLeft,
	.topBarRight {
		gap: 0;
	}

	.mainNavContainer {
		gap: $spacer-sm;
		padding: 0;
	}

	.navigation {
		padding-left: $spacer-md;
		justify-content: flex-start;
		order: 3;
		display: none;
		flex-direction: column;
		position: fixed;
		top: 0;
		left: -100%;
		width: 65%;
		max-width: 300px;
		height: 100vh;
		background-color: $primary-color-dark;
		box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
		padding: $spacer-xxl $spacer-md $spacer-md $spacer-md;
		transition: left 0.35s ease-in-out;
		z-index: 1050;

		&.isOpen {
			display: flex;
			left: 0;
		}

		ul {
			flex-direction: column;
			align-items: flex-start;
			width: 100%;
			gap: 0;

			li {
				width: 100%;
			}
		}

		.navLink {
			display: block;
			padding: $spacer-md;
			width: 100%;
			border-bottom: 1px solid rgba($brand-white, 0.1);
			font-size: $font-size-lg;
			color: $brand-white;

			&:hover,
			&:focus,
			&.activeLink {
				background-color: rgba($brand-white, 0.15);
				color: $brand-yellow;
			}

			&.activeLink::after {
				content: none;
			}
		}
	}

	.mobileOnlyLink {
		display: block !important;
	}

	.rightControls {
		flex-grow: 1;
		justify-content: flex-end;
	}

	.searchContainer {

		// No mobile, o dropdown de sugestões é controlado pelo SearchSuggestions.module.scss
		// A lógica de esconder o dropdown quando o menu mobile está aberto:
		.navigation.isOpen~.rightControls & .suggestionsDropdown {
			// Este seletor ainda é válido
			display: none;
		}
	}

	.headerActions {
		gap: $spacer-sm;
	}

	.mobileMenuButton {
		display: block;
		order: 2;
	}
}